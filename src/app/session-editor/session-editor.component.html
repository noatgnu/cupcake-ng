<div class="container" style="padding-top: 100px">
  <form [formGroup]="form">
    <div class="form-floating">
      <input type="text" formControlName="name" class="form-control" id="name" placeholder="Name">
      <label for="name">Session Name</label>
    </div>
    <div class="form-check">
      <input type="checkbox" formControlName="enabled" class="form-check-input" id="enabled">
      <label class="form-check-label" for="enabled">Enabled for Public View</label>
    </div>
  </form>
  <form [formGroup]="formSearch">
    <b>Associated Protocols</b>
    @if (associatedProtocols.length > 0) {
      <div>
        <app-protocol-list [protocols]="associatedProtocols"></app-protocol-list>
      </div>
    }
    <div class="form-floating mt-2">
      <input type="search" formControlName="protocolSearch" class="form-control" id="protocolSearch">
      <label for="protocolSearch">Search New Protocol to Add to Session</label>
    </div>
    @if (protocolSearchResults) {
      <div class="d-flex flex-column gap-2">
        Search results:
        <app-protocol-list [protocols]="protocolSearchResults.results"></app-protocol-list>
        <div class="d-flex flex-row gap-2">
          @if (protocolSearchResults.previous) {
            <button class="btn btn-primary" (click)="getProtocols(protocolSearchResults.previous)">Previous</button>
          } @else {
            <button class="btn btn-primary" disabled>Previous</button>
          }
          @if (protocolSearchResults.next) {
            <button class="btn btn-primary" (click)="getProtocols(protocolSearchResults.next)">Next</button>
          } @else {
            <button class="btn btn-primary" disabled>Next</button>
          }
        </div>

      </div>
    }
  </form>
  <div class="mt-2">
    <ngb-datepicker #dp [displayMonths]="2" (dateSelect)="onDateSelection($event)" [dayTemplate]="t"></ngb-datepicker>

    <ng-template #t let-date let-focused="focused">
	    <span
    class="custom-day"
    [class.focused]="focused"
    [class.range]="isRange(date)"
    [class.faded]="isHovered(date) || isInside(date)"
    [class.durationPreview]="isInPreviewRange(date)&&!isHovered(date)"
    (mouseenter)="hoveredDate = date"
    (mouseleave)="hoveredDate = null"
  >
		{{ date.day }}
	    </span>
    </ng-template>
  </div>

</div>
